{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://firesalamander.septeo.com/schemas/semantic_result.json",
  "title": "Semantic Analysis Result",
  "description": "Schema for semantic analysis results",
  "type": "object",
  "properties": {
    "audit_id": {
      "type": "string"
    },
    "model_version": {
      "type": "string",
      "pattern": "^sem-v\\d+\\.\\d+$"
    },
    "topics": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "id": {"type": "string"},
          "label": {"type": "string"},
          "terms": {
            "type": "array",
            "items": {"type": "string"}
          }
        },
        "required": ["id", "label", "terms"]
      }
    },
    "suggestions": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "keyword": {
            "type": "string",
            "minLength": 2
          },
          "reason": {"type": "string"},
          "confidence": {
            "type": "number",
            "minimum": 0,
            "maximum": 1
          },
          "evidence": {
            "type": "array",
            "items": {"type": "string"}
          }
        },
        "required": ["keyword", "reason", "confidence", "evidence"]
      }
    },
    "metadata": {
      "type": "object",
      "properties": {
        "schema_version": {"type": "string"},
        "weights_version": {"type": "string"},
        "execution_time_ms": {"type": "integer"},
        "lang": {"type": "string"}
      },
      "required": ["schema_version", "execution_time_ms", "lang"]
    }
  },
  "required": ["audit_id", "model_version", "topics", "suggestions", "metadata"],
  "additionalProperties": false
}